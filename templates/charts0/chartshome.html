{%extends 'charts/base.html'%}


{%block title%}
Home

{%endblock title%}


{%block content%}
<h4 style="font-family: Apple Chancery; font-size: 32px;">Incoming Deficiencies Charts Home {{time}}</h4>

<div class="overflow-auto w-100 h-10 center3" style="background-color:rgb(30, 144, 255);">
    <table class="table table-bordered ">
        <thead>
            <tr>
                <th><form
                    style="background-color:rgb(30, 144, 255); color:rgb(0, 0, 0); font-weight: 500; font-size: 12px; margin-right:0px; margin-top:5px;"
                    method="POST" action="{%url 'partschart0'%}">
                
                    {% csrf_token %}
                    <input type="text" name="datepicker3" style="background-color: white; color:black" placeholder="From"
                        aria-label="From" id="datepicker3">
                    <script>
                        $(function () {
                            $("#datepicker3").datepicker({
                                dateFormat: "yy-mm-dd"
                            });
                        });
                    </script>
                    <input type="text" name="datepicker4" style="background-color: white; color:black" placeholder="To" aria-label="To"
                        id="datepicker4">
                
                    <script>
                        $(function () {
                            $("#datepicker4").datepicker({
                                dateFormat: "yy-mm-dd"
                            });
                        });
                    </script>
                    <br>
                    <label><input type=checkbox name="DPC" id="DPC" value="DPC"> DPC </label>
                    <label><input type=checkbox name="DemuTC" id="DemuTC" value="DemuTC"> DemuTC </label>
                    <label><input type=checkbox name="MemuTC" id="MemuTC" value="MemuTC"> MemuTC </label>
                    <label><input type=checkbox name="MC" id="MC" value="MC"> MC </label><br>
                
                    <input type="number" id="threshold" name="threshold" min="1" max="20"><br>
                    <label>Threshold ?</label><br>
                    <input type="submit" value="Part wise Failure" style="background-color: lightcoral; color:black" />
                </form></th>
                <th><form
                    style="background-color:rgb(30, 144, 255); color:rgb(0, 0, 0); font-weight: 500; font-size: 12px; margin-right:0px; margin-top:5px;"
                    method="POST" action="{%url 'sectionchart0'%}">
                
                    {% csrf_token %}
                    <input type="text" name="datepicker" style="background-color: white; color:black" placeholder="From"
                        aria-label="From" id="datepicker">
                    <script>
                        $(function () {
                            $("#datepicker").datepicker({
                                dateFormat: "yy-mm-dd"
                            });
                        });
                    </script>
                    <input type="text" name="datepicker1" style="background-color: white; color:black" placeholder="To" aria-label="To"
                        id="datepicker1">
                
                    <script>
                        $(function () {
                            $("#datepicker1").datepicker({
                                dateFormat: "yy-mm-dd"
                            });
                        });
                    </script>
                    <br>
                    <label><input type=checkbox name="DPC" id="DPC" value="DPC"> DPC </label>
                    <label><input type=checkbox name="DemuTC" id="DemuTC" value="DemuTC"> DemuTC </label>
                    <label><input type=checkbox name="MemuTC" id="MemuTC" value="MemuTC"> MemuTC </label>
                    <label><input type=checkbox name="MC" id="MC" value="MC"> MC </label><br>
                
                    <input type="number" id="threshold" name="threshold" min="1" max="20"><br>
                    <label>Threshold ?</label><br>
                    <input type="submit" value="Section wise Failure" style="background-color: lightcoral; color:black" />
                </form></th>
            </tr>
        </thead>
    </table>
</div>
<div class='center' style="background: rgb(246, 245, 245);">
    {%if RolStock%}
<h3>{{RolStock}}: Failure Cases Breakup from {{from}} to {{to}}</h3>
{%endif%}
<canvas  id="myChart" style="background: rgb(246, 245, 245);" width="40" height="16"></canvas>
</div>
<script>
    const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: [{%for x in data%} {%for key, value in x.items%} '{{key}}', {%endfor%} {%endfor%}],
            datasets: [{
                label: 'No of Cases',
                data: [{%for x in data%} {%for key, value in x.items%} {{value}}, {%endfor%} {%endfor%}],
                backgroundColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 2
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>

{%endblock content%}
{%block afterbody%}

{%endblock afterbody%}